(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["uni_modules-nm-account-pages-loginPhone"],{"20f3":function(e,t,n){"use strict";var i=n("8bdb"),a=n("5145");i({target:"Array",proto:!0,forced:a!==[].lastIndexOf},{lastIndexOf:a})},"269b":function(e,t,n){"use strict";n.r(t);var i=n("e6e4"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=a.a},"2ddc":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticStyle:{width:"100%",height:"100%"}},[n("v-uni-view",{staticClass:"flex-col justify-center align-center"},[n("v-uni-image",{staticClass:"logo",attrs:{src:e.baseConfig.portalLogo?e.baseConfig.portalLogo:"https://frontend-dev.oss-cn-hangzhou.aliyuncs.com/modules/LOGO_GR.png"}}),n("v-uni-text",{staticClass:"app-name mt-12"},[e._v(e._s(e.baseConfig.systemName?e.baseConfig.systemName:"乡村微脑"))])],1),n("v-uni-view",{staticStyle:{margin:"0 45px"}},[n("v-uni-view",{staticStyle:{"margin-top":"45px"}},[n("v-uni-text",{staticClass:"title-text"},[e._v("手机号")]),n("v-uni-input",{staticClass:"input",attrs:{maxlength:"11",placeholder:"请输入手机号"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),n("v-uni-view",{staticClass:"line"})],1),n("v-uni-view",{staticStyle:{"margin-top":"18px"}},[n("v-uni-text",{staticClass:"title-text"},[e._v("验证码")]),n("v-uni-view",{staticClass:"flex-row-center justify-between align-center"},[n("v-uni-input",{staticClass:"input",attrs:{placeholder:"请输入验证码"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),n("v-uni-view",{staticClass:"code-text",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.getCode&&e.getCodeNumber()}}},[e._v(e._s(e.getCode?"获取验证码":e.countDown+"s"))])],1),n("v-uni-view",{staticClass:"line"})],1),n("v-uni-view",{staticClass:"flex-row-center justify-center phone-btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.login.apply(void 0,arguments)}}},[e._v("登录")])],1)],1)},a=[]},"3bca":function(e,t,n){var i=n("c86c");t=i(!1),t.push([e.i,".top-bg[data-v-1489d800]{width:100%;height:%?472?%}.logo[data-v-1489d800]{width:80px;height:80px;margin-top:70px;box-shadow:0 6px 15px 0 rgba(0,132,255,.11);border-radius:12px}.app-name[data-v-1489d800]{font-size:18px;font-weight:600;color:#333}.title-text[data-v-1489d800]{font-size:18px;font-weight:500;color:#302c2c}.input[data-v-1489d800]{margin-top:10px;font-size:15px;font-weight:400;color:#302c2c}.line[data-v-1489d800]{margin-top:10px;width:100%;height:1px;background:#d8d8d8;opacity:.35}.phone-btn[data-v-1489d800]{margin-top:50px;width:100%;height:52px;background:linear-gradient(97deg,#50adff,#0084ff);box-shadow:0 8px 21px 0 rgba(7,135,255,.36);border-radius:6px;font-size:20px;font-weight:500;color:#fff}.code-text[data-v-1489d800]{font-size:14px;font-weight:400;color:#0084ff}",""]),e.exports=t},"7bfa":function(e,t,n){"use strict";n.r(t);var i=n("2ddc"),a=n("269b");for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);n("ccbb");var r=n("828b"),s=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,"1489d800",null,!1,i["a"],void 0);t["default"]=s.exports},a6c5:function(e,t,n){var i=n("3bca");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=n("967d").default;a("46068d98",i,!0,{sourceMap:!1,shadowMode:!1})},a7e9:function(e,t){e.exports={login:"module/default/member/portal/nl/user-api/login",register:"module/default/member/portal/nl/user-api/register",getVerifyCode:"module/default/member/portal/nl/sms-api/send",bindPhone:"module/default/member/portal/user-api/bind-phone",getUserInfo:"module/default/member/portal/user-api/info",updateUserInfo:"module/default/member/portal/user-api/update",submitFeedback:"module/default/basic/feedback/feedback",agreement:"module/default/basic/agreement/nl/index",logout:"module/default/member/portal/user-api/logout",wxBindPhone:"/module/default/member/portal/user-api/wx/mp/bind-phone",getBaseConfig:"/module/default/configCenter/portal/nl/get",loginForWx:"module/default/member/portal/nl/wxAuth/login"}},cb95:function(e,t,n){"use strict";n("6a54");var i=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("23f4"),n("7d2f"),n("5c47"),n("9c4e"),n("ab80"),n("0506"),n("af8f"),n("20f3"),n("5ef2"),n("2c10");var a=i(n("80b1")),o=i(n("efe5")),r=function(){function e(){(0,a.default)(this,e)}return(0,o.default)(e,null,[{key:"isMobilePhone",value:function(e){var t=new RegExp(/^1[23456789]\d{9}$/);return!!t.test(e)}},{key:"isIdentityCard",value:function(e){var t=new RegExp(/(^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$)|(^[1-9]\d{5}\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}$)/);return!!t.test(e)}},{key:"isTelephone",value:function(e){return e.length>9?!!/^[0][1-9]{2,3}-[0-9]{5,10}$/.test(e):!!/^[1-9]{1}[0-9]{5,8}$/.test(e)}},{key:"isEmail",value:function(e){return!!/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/.test(e)}},{key:"isNull",value:function(e){if(""==e)return!0;var t=new RegExp("^[ ]+$");return t.test(e)}},{key:"isInteger",value:function(e){return/^[-]{0,1}[0-9]{1,}$/.test(e)}},{key:"isNumber",value:function(e){var t=new RegExp("^[0-9]+$");return-1!=e.search(t)}},{key:"isDecimal",value:function(e){if(isInteger(e))return!0;return!!/^[-]{0,1}(\d+)[\.]+(\d+)$/.test(e)&&(0!=RegExp.$1||0!=RegExp.$2)}},{key:"isIP",value:function(e){if(isNull(e))return!1;return!!(/^(\d+)\.(\d+)\.(\d+)\.(\d+)$/g.test(e)&&RegExp.$1<256&&RegExp.$2<256&&RegExp.$3<256&&RegExp.$4<256)}},{key:"isPort",value:function(e){return isNumber(e)&&e<65536}},{key:"isMoney",value:function(e){var t=new RegExp("^[0-9]+[.][0-9]{0,3}$");return!!t.test(e)}},{key:"isNumberOr_Letter",value:function(e){var t=new RegExp("^[0-9a-zA-Z_]+$");return!!t.test(e)}},{key:"isNumberOrLetter",value:function(e){var t=new RegExp("^[0-9a-zA-Z]+$");return!!t.test(e)}},{key:"isChinaOrNumbOrLett",value:function(e){var t=new RegExp("^[0-9a-zA-Z一-龥]+$");return!!t.test(e)}},{key:"isLastMatch",value:function(e,t){var n=e.lastIndexOf(t);return e.length==n+t.length}},{key:"isFirstMatch",value:function(e,t){var n=e.indexOf(t);return 0==n}},{key:"isMatch",value:function(e,t){var n=e.indexOf(t);return-1!=n}},{key:"isWechatBrowser",value:function(){var e=navigator.userAgent.toLowerCase();return"micromessenger"==e.match(/MicroMessenger/i)}},{key:"isMobile",value:function(){var e={win:!1,mac:!1,xll:!1,ipad:!1},t=navigator.platform;return e.win=0===t.indexOf("Win"),e.mac=0===t.indexOf("Mac"),e.x11="X11"===t||0===t.indexOf("Linux"),e.ipad=null!=navigator.userAgent.match(/iPad/i),!(e.win||e.mac||e.xll||e.ipad)}}]),e}(),s=r;t.default=s},ccbb:function(e,t,n){"use strict";var i=n("a6c5"),a=n.n(i);a.a},e6e4:function(e,t,n){"use strict";n("6a54");var i=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("9db6");var a,o=i(n("a7e9")),r=i(n("cb95")),s={data:function(){return{phone:"",code:"",getCode:!0,countDown:60,hookForceLogin:!1,baseConfig:{}}},onLoad:function(){this.getBaseConfig()},watch:{countDown:{deep:!0,handler:function(e,t){0===e&&(clearInterval(a),this.countDown=60,this.getCode=!0)}}},methods:{getBaseConfig:function(){var e=this;this.$http.get(o.default.getBaseConfig,{key:"baseConfig"}).then((function(t){e.baseConfig=t.result}))},getCodeNumber:function(){var e=this;if(this.phone)if(r.default.isMobilePhone(this.phone)){var t={phone:this.phone,type:"REGISTER_AND_LOGIN"},n=this;this.$http.post(o.default.getVerifyCode,t).then((function(t){e.$toast.showToast(t),e.getCode=!1,a=setInterval((function(){n.countDown--}),1e3)}))}else this.$toast.showToast("手机格式不正确");else this.$toast.showToast("手机号不能为空")},login:function(){var e=this;if(this.phone)if(r.default.isMobilePhone(this.phone))if(this.code){var t={phone:this.phone,code:this.code,scenario:"defaultPhoneLogin"};this.$http.post(o.default.login,t).then((function(t){uni.setStorageSync("token",t.result.tokenValue);var n=uni.getStorageSync("redirect");n=decodeURIComponent(n),e.$http.get(o.default.getUserInfo).then((function(e){uni.setStorageSync("userInfo",e.result),n?uni.reLaunch({url:n.startsWith("/")?n:"/"+n}):uni.reLaunch({url:"/pages/index/index"})}))}))}else this.$toast.showToast("请输验证码");else this.$toast.showToast("手机格式不正确");else this.$toast.showToast("手机号不能为空")}}};t.default=s}}]);